{"version":3,"file":"forum.js","mappings":"UAAIA,EACAC,E,wBCDJC,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,mB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,6B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,6B,sBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,+B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,qC,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,0B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,4B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,uC,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,0B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,0B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,mC,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,wB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,8B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,sB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,Y,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,gC,qBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAU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","sources":["webpack://@flarum/messages/webpack/runtime/load script","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Avatar')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Dropdown')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/InfoTile')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Link')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/LinkButton')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Modal')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Page')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Tooltip')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/UserSelectionModal')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/fullTime')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/humanTime')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/listItems')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/username')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/states/PaginatedListState')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/ScrollListener')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/classList')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/extractText')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/AbstractPost')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/Comment')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/ComposerBody')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/HeaderList')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/IndexSidebar')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/PageStructure')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/PostMeta')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/PostUser')\"","webpack://@flarum/messages/../../../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@flarum/messages/../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@flarum/messages/../../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@flarum/messages/../../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@flarum/messages/webpack/bootstrap","webpack://@flarum/messages/webpack/runtime/compat get default export","webpack://@flarum/messages/webpack/runtime/define property getters","webpack://@flarum/messages/webpack/runtime/ensure chunk","webpack://@flarum/messages/webpack/runtime/get javascript chunk filename","webpack://@flarum/messages/webpack/runtime/global","webpack://@flarum/messages/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/messages/webpack/runtime/make namespace object","webpack://@flarum/messages/webpack/runtime/publicPath","webpack://@flarum/messages/webpack/runtime/compat","webpack://@flarum/messages/webpack/runtime/jsonp chunk loading","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/HeaderSecondary')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/utils/UserControls')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/HeaderDropdown')\"","webpack://@flarum/messages/./src/forum/components/DialogsDropdown.tsx","webpack://@flarum/messages/./src/forum/states/DialogListState.ts","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/computed')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/string')\"","webpack://@flarum/messages/./src/common/models/DialogMessage.ts","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/app')\"","webpack://@flarum/messages/./src/common/models/Dialog.ts","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/models/User')\"","webpack://@flarum/messages/./src/common/extend.ts","webpack://@flarum/messages/./src/forum/extend.ts","webpack://@flarum/messages/./src/forum/index.tsx"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"module.exports:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","module.exports = flarum.reg.get('core', 'common/Component');","module.exports = flarum.reg.get('core', 'common/components/Avatar');","module.exports = flarum.reg.get('core', 'common/components/Button');","module.exports = flarum.reg.get('core', 'common/components/Dropdown');","module.exports = flarum.reg.get('core', 'common/components/Icon');","module.exports = flarum.reg.get('core', 'common/components/InfoTile');","module.exports = flarum.reg.get('core', 'common/components/Link');","module.exports = flarum.reg.get('core', 'common/components/LinkButton');","module.exports = flarum.reg.get('core', 'common/components/LoadingIndicator');","module.exports = flarum.reg.get('core', 'common/components/Modal');","module.exports = flarum.reg.get('core', 'common/components/Page');","module.exports = flarum.reg.get('core', 'common/components/Tooltip');","module.exports = flarum.reg.get('core', 'common/components/UserSelectionModal');","module.exports = flarum.reg.get('core', 'common/helpers/fullTime');","module.exports = flarum.reg.get('core', 'common/helpers/humanTime');","module.exports = flarum.reg.get('core', 'common/helpers/listItems');","module.exports = flarum.reg.get('core', 'common/helpers/username');","module.exports = flarum.reg.get('core', 'common/states/PaginatedListState');","module.exports = flarum.reg.get('core', 'common/utils/ItemList');","module.exports = flarum.reg.get('core', 'common/utils/ScrollListener');","module.exports = flarum.reg.get('core', 'common/utils/Stream');","module.exports = flarum.reg.get('core', 'common/utils/classList');","module.exports = flarum.reg.get('core', 'common/utils/extractText');","module.exports = flarum.reg.get('core', 'forum/app');","module.exports = flarum.reg.get('core', 'forum/components/AbstractPost');","module.exports = flarum.reg.get('core', 'forum/components/Comment');","module.exports = flarum.reg.get('core', 'forum/components/ComposerBody');","module.exports = flarum.reg.get('core', 'forum/components/HeaderList');","module.exports = flarum.reg.get('core', 'forum/components/IndexSidebar');","module.exports = flarum.reg.get('core', 'forum/components/PageStructure');","module.exports = flarum.reg.get('core', 'forum/components/PostMeta');","module.exports = flarum.reg.get('core', 'forum/components/PostUser');","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\tflarum.reg._webpack_runtimes[\"flarum-messages\"] ||= __webpack_require__;// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + {\"301\":\"forum/components/MessagesPage\",\"451\":\"forum/components/MessageComposer\",\"619\":\"forum/components/DialogDropdownList\"}[chunkId] + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.f.compat = (chunkId, promises) => {\n\n\tconst originalLoadChunk = __webpack_require__.l;\n\t__webpack_require__.l = flarum.reg.loadChunk.bind(flarum.reg, originalLoadChunk);\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t170: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmodule_exports\"] = self[\"webpackChunkmodule_exports\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderSecondary');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/UserControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderDropdown');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/forum/app';\nimport HeaderDropdown from 'flarum/forum/components/HeaderDropdown';\nimport classList from 'flarum/common/utils/classList';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nexport default class DialogsDropdown extends HeaderDropdown {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"DialogDropdownList\", null);\n  }\n  static initAttrs(attrs) {\n    attrs.className = classList('DialogsDropdown', attrs.className);\n    attrs.label = attrs.label || app.translator.trans('flarum-messages.forum.header.dropdown_tooltip');\n    attrs.icon = attrs.icon || 'fas fa-envelope';\n    super.initAttrs(attrs);\n  }\n  getContent() {\n    if (!this.DialogDropdownList) {\n      import(/* webpackChunkName: 'forum/components/DialogDropdownList', webpackMode: 'lazy-once' */ './DialogDropdownList').then(DialogDropdownList => {\n        this.DialogDropdownList = DialogDropdownList.default;\n      });\n      return m(LoadingIndicator, null);\n    }\n    return m(this.DialogDropdownList, {\n      state: this.attrs.state\n    });\n  }\n  goToRoute() {\n    m.route.set(app.route('dialogs'));\n  }\n  getUnreadCount() {\n    return app.session.user.attribute('messageCount');\n  }\n  getNewCount() {\n    return app.session.user.attribute('messageCount');\n  }\n}\nflarum.reg.add('flarum-messages', 'forum/components/DialogsDropdown', DialogsDropdown);flarum.reg.addChunkModule('619', '331', 'flarum-messages', 'forum/components/DialogDropdownList');\nflarum.reg.addChunkModule('619', '331', 'flarum-messages', 'forum/components/DialogList');\nflarum.reg.addChunkModule('619', '331', 'flarum-messages', 'forum/components/DialogListItem');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/forum/app';\nimport PaginatedListState from 'flarum/common/states/PaginatedListState';\nexport default class DialogListState extends PaginatedListState {\n  constructor(params, page, perPage) {\n    if (page === void 0) {\n      page = 1;\n    }\n    if (perPage === void 0) {\n      perPage = null;\n    }\n    super(params, page, perPage);\n    _defineProperty(this, \"lastCount\", 0);\n  }\n  get type() {\n    return 'dialogs';\n  }\n  getAllItems() {\n    return super.getAllItems();\n  }\n  requestParams() {\n    const params = {\n      include: ['lastMessage', 'users.groups'],\n      filter: this.params.filter || {},\n      sort: this.currentSort() || this.sortValue(Object.values(this.sortMap())[0])\n    };\n    return params;\n  }\n  sortMap() {\n    const map = {};\n    map.latest = '-lastMessageAt';\n    map.newest = '-createdAt';\n    map.oldest = 'createdAt';\n    return map;\n  }\n  load() {\n    if (app.session.user?.attribute('messageCount') !== this.lastCount) {\n      this.pages = [];\n      this.location = {\n        page: 1\n      };\n      this.lastCount = app.session.user?.attribute('messageCount') || 0;\n    }\n    if (this.pages.length > 0) {\n      return Promise.resolve();\n    }\n    return super.loadNext();\n  }\n  markAllAsRead() {\n    return app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/dialogs/read'\n    }).then(() => {\n      app.dialogs.getAllItems().forEach(dialog => {\n        dialog.pushAttributes({\n          unreadCount: 0\n        });\n      });\n      app.session.user.pushAttributes({\n        messageCount: 0\n      });\n      app.dropdownDialogs.clear();\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('flarum-messages', 'forum/states/DialogListState', DialogListState);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/computed');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/string');","import Model from 'flarum/common/Model';\nimport computed from 'flarum/common/utils/computed';\nimport { getPlainContent } from 'flarum/common/utils/string';\nexport default class DialogMessage extends Model {\n  content() {\n    return Model.attribute('content').call(this);\n  }\n  contentHtml() {\n    return Model.attribute('contentHtml').call(this);\n  }\n  renderFailed() {\n    return Model.attribute('renderFailed').call(this);\n  }\n  contentPlain() {\n    return computed('contentHtml', content => {\n      if (typeof content === 'string') {\n        return getPlainContent(content);\n      }\n      return content;\n    }).call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n  dialog() {\n    return Model.hasOne('dialog').call(this);\n  }\n  user() {\n    return Model.hasOne('user').call(this);\n  }\n}\nflarum.reg.add('flarum-messages', 'common/models/DialogMessage', DialogMessage);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/app');","import Model from 'flarum/common/Model';\nimport app from 'flarum/common/app';\nexport default class Dialog extends Model {\n  title() {\n    return Model.attribute('title').call(this);\n  }\n  type() {\n    return Model.attribute('type').call(this);\n  }\n  lastMessageAt() {\n    return Model.attribute('lastMessageAt', Model.transformDate).call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n  users() {\n    return Model.hasMany('users').call(this);\n  }\n  firstMessage() {\n    return Model.hasOne('firstMessage').call(this);\n  }\n  lastMessage() {\n    return Model.hasOne('lastMessage').call(this);\n  }\n  unreadCount() {\n    return Model.attribute('unreadCount').call(this);\n  }\n  lastReadMessageId() {\n    return Model.attribute('lastReadMessageId').call(this);\n  }\n  lastReadAt() {\n    return Model.attribute('lastReadAt', Model.transformDate).call(this);\n  }\n  recipient() {\n    let users = this.users();\n    return !users ? null : users.find(user => user && user.id() !== app.session.user.id());\n  }\n}\nflarum.reg.add('flarum-messages', 'common/models/Dialog', Dialog);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/User');","import DialogMessage from './models/DialogMessage';\nimport Dialog from './models/Dialog';\nimport Extend from 'flarum/common/extenders';\nimport User from 'flarum/common/models/User';\nexport default [new Extend.Store().add('dialogs', Dialog) //\n.add('dialog-messages', DialogMessage),\n//\n\nnew Extend.Model(User) //\n.attribute('canSendAnyMessage')];","import app from 'flarum/forum/app';\nimport Extend from 'flarum/common/extenders';\nimport commonExtend from '../common/extend';\nexport default [...commonExtend, new Extend.Routes() //\n.add('messages', '/messages', () => import(/* webpackChunkName: 'forum/components/MessagesPage', webpackMode: 'lazy-once' */ './components/MessagesPage')).add('dialog', '/messages/dialog/:id', () => import(/* webpackChunkName: 'forum/components/MessagesPage', webpackMode: 'lazy-once' */ './components/MessagesPage')).helper('dialog', dialog => app.route('dialog', {\n  id: dialog.id()\n}))];flarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/MessagesPage');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/MessagesSidebar');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/DialogSection');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/MessageStream');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/states/MessageStreamState');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/DetailsModal');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/Message');","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexSidebar from 'flarum/forum/components/IndexSidebar';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport UserControls from 'flarum/forum/utils/UserControls';\nimport Button from 'flarum/common/components/Button';\nimport DialogsDropdown from './components/DialogsDropdown';\nimport DialogListState from './states/DialogListState';\nexport { default as extend } from './extend';\napp.initializers.add('flarum-messages', () => {\n  app.dialogs = new DialogListState({}, 1);\n  app.dropdownDialogs = new DialogListState({\n    filter: {\n      unread: true\n    }\n  }, 1, 5);\n  app.composer.composingMessageTo = function (dialog) {\n    return this.isVisible() && this.bodyMatches('flarum/messages/forum/components/MessageComposer', {\n      dialog\n    });\n  };\n  extend(IndexSidebar.prototype, 'navItems', function (items) {\n    if (app.session.user) {\n      items.add('messages', m(LinkButton, {\n        href: app.route('messages'),\n        icon: \"far fa-envelope\",\n        active: app.current.data.routeName && ['messages', 'dialog'].includes(app.current.data.routeName)\n      }, app.translator.trans('flarum-messages.forum.index.messages_link')), 95);\n    }\n  });\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    if (app.session.user?.canSendAnyMessage()) {\n      items.add('messages', m(DialogsDropdown, {\n        state: app.dropdownDialogs\n      }), 15);\n    }\n  });\n\n  // @ts-ignore\n  extend(UserControls, 'userControls', (items, user) => {\n    if (app.session.user?.canSendAnyMessage()) {\n      items.add('sendMessage', m(Button, {\n        icon: \"fas fa-envelope\",\n        onclick: () => {\n          flarum.reg.asyncModuleImport('flarum/forum/components/ComposerBody').then(() => {\n            app.composer.load(() => import(/* webpackChunkName: 'forum/components/MessageComposer', webpackMode: 'lazy-once' */ './components/MessageComposer'), {\n              user: app.session.user,\n              recipients: [user]\n            }).then(() => app.composer.show());\n          });\n        },\n        helperText: user.canSendAnyMessage() ? null : app.translator.trans('flarum-messages.forum.user_controls.cannot_reply_text')\n      }, app.translator.trans('flarum-messages.forum.user_controls.send_message_button')));\n    }\n  });\n  extend('flarum/forum/components/NotificationGrid', 'notificationTypes', function (items) {\n    items.add('messageReceived', {\n      name: 'messageReceived',\n      icon: 'fas fa-envelope',\n      label: app.translator.trans('flarum-messages.forum.settings.notify_message_received_label')\n    });\n  });\n});flarum.reg.addChunkModule('451', '761', 'flarum-messages', 'forum/components/MessageComposer');"],"names":["inProgress","dataWebpackPrefix","module","exports","flarum","reg","get","_typeof","o","Symbol","iterator","constructor","prototype","_defineProperty","e","r","t","i","toPrimitive","call","TypeError","String","toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","__webpack_module_cache__","__webpack_require__","moduleId","_webpack_runtimes","cachedModule","undefined","__webpack_modules__","m","n","getter","__esModule","d","a","definition","key","f","chunkId","Promise","all","keys","reduce","promises","u","g","globalThis","this","Function","window","obj","prop","hasOwnProperty","l","url","done","push","script","needAttach","scripts","document","getElementsByTagName","length","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","forEach","fn","setTimeout","bind","type","target","head","appendChild","toStringTag","scriptUrl","importScripts","location","currentScript","tagName","toUpperCase","test","Error","replace","p","compat","originalLoadChunk","loadChunk","installedChunks","j","installedChunkData","promise","resolve","reject","error","errorType","realSrc","message","name","request","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","some","id","chunkLoadingGlobal","self","DialogsDropdown","super","arguments","initAttrs","attrs","className","label","trans","icon","getContent","DialogDropdownList","state","then","default","goToRoute","route","set","getUnreadCount","user","attribute","getNewCount","add","addChunkModule","DialogListState","params","page","perPage","getAllItems","requestParams","include","filter","sort","currentSort","sortValue","values","sortMap","map","load","lastCount","pages","loadNext","markAllAsRead","method","dialog","pushAttributes","unreadCount","messageCount","clear","redraw","DialogMessage","content","contentHtml","renderFailed","contentPlain","getPlainContent","createdAt","Dialog","title","lastMessageAt","users","firstMessage","lastMessage","lastReadMessageId","lastReadAt","recipient","find","helper","unread","composingMessageTo","isVisible","bodyMatches","extend","items","href","active","routeName","includes","canSendAnyMessage","onclick","asyncModuleImport","recipients","show","helperText"],"sourceRoot":""}